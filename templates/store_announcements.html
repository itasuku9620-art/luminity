{% extends "base.html" %}

{% block content %}
<main style="max-width:880px; margin:16px auto 64px; padding:0 16px;">
  <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:12px;">
    <div>
      <a class="btn" href="{{ url_for('store_detail', store_id=store_id) }}">← 店舗ページ</a>
      <h1 style="display:inline-block; margin:0 0 0 8px; font-weight:900;">
        {{ store['店舗名'] or store.get('name') }} のお知らせ
      </h1>
    </div>
    {% if can_post %}
      <a class="btn" href="{{ url_for('announce_new', store_id=store_id) }}">お知らせを投稿</a>
    {% endif %}
  </div>

  {% if annos %}
    <div style="display:grid; gap:10px;">
      {% for a in annos %}
        <article style="border:1px solid #e5e7eb; border-radius:12px; background:#fff; padding:12px;">
          <div style="display:flex; align-items:center; justify-content:space-between;">
            <h2 style="margin:0; font-size:18px; font-weight:900;">{{ a['title'] }}</h2>
            <div style="color:#6b7280; font-size:12px;">{{ a['created_at'] }}</div>
          </div>
          {% if a['body'] %}
            <div style="white-space:pre-wrap; margin-top:6px;">{{ a['body'] }}</div>
          {% endif %}
          {% if a['link_url'] %}
            <div style="margin-top:6px;">
              <a class="btn" href="{{ a['link_url'] }}" target="_blank" rel="noopener">詳しく見る</a>
            </div>
          {% endif %}
        </article>
      {% endfor %}
    </div>
  {% else %}
    <p style="color:#6b7280;">まだお知らせはありません。</p>
  {% endif %}
</main>
{% endblock %}
